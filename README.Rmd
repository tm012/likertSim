Here’s a cleaned, README-ready version—short, scannable, and non-redundant.

---

# likertSim — Quick Start

## Install

```r
install.packages("devtools")           # if needed
devtools::install_github("tm012/likertSim")
library(likertSim)
```

## Minimal example

```r
# First column = coder_id; remaining columns = Likert items
set.seed(1)
df_real <- data.frame(
  coder_id = paste0("r", 1:50),
  A = sample(1:5, 50, TRUE),
  B = sample(1:5, 50, TRUE),
  C = sample(1:5, 50, TRUE)
)

out <- simulate_and_compare(
  df_real,
  K_min = 1, K_max = 5,
  N_sim = 200,
  noise_factor = 1.20,  # +20% SD
  bias         = 0.20,  # ~+0.2 category (lenient)
  corr_alpha   = 0.30,  # 30% correlation shrink
  mode         = "threshold"
)

head(out$comparison)
out$warnings
```

---

## Stress knobs (tiers)

Use these presets to dial realism or “stress test” reliability.

| Tier     | `noise_factor` | `bias` | `corr_alpha` | Rule of thumb                                        |
| -------- | -------------: | -----: | -----------: | ---------------------------------------------------- |
| Baseline |           1.00 |   0.00 |         0.00 | Mimics real raters.                                  |
| Mild     |           1.05 |   0.10 |         0.10 | SD +5%; \~+0.1 category; slight structure shrink.    |
| Moderate |           1.15 |   0.25 |         0.25 | SD +15%; \~+¼ category; noticeable reliability drop. |
| Strong   |           1.30 |   0.40 |         0.50 | SD +30%; \~+0.4 category; correlations halved.       |
| Extreme  |           1.60 |   0.60 |         0.80 | SD +60%; \~+0.6 category; structure near collapse.   |



---

## Key arguments (quick reference)



df_real (data.frame / matrix, required)
Your real Likert dataset. First column should be an ID; remaining columns are items. Used to learn item means/SDs, thresholds, and inter-item correlations.

K_min (integer, required)
Lowest Likert category in your scale (usually 1).

K_max (integer, required)
Highest Likert category (e.g., 5 or 7). All simulated scores are rounded and clipped to [K_min, K_max].

N_sim (integer, default = nrow(df_real))
Number of simulated raters/rows to generate per condition (default & stress).

noise_factor (numeric ≥ 0, default = 1.0)
Multiplies item SDs before discretizing.

1.0 = same dispersion as real data

>1.0 = noisier raters (e.g., 1.15 → SD +15%)

0.8–1.0 = very consistent raters

bias (numeric, default = 0.0)
Constant shift in category units applied to latent scores before rounding.

+ = lenient (pushes up), − = severe (pushes down)

Typical safe range: about −0.6 … +0.6 on 5–7 point scales

corr_alpha (numeric in [0,1], default = 0.0)
Correlation “shrink” toward independence. Implemented as
R' = (1 − corr_alpha)·R + corr_alpha·I.

0.0 = keep real inter-item structure

0.25 ≈ reduce off-diagonals by 25%

1.0 = wipe structure (identity)

seed_default (integer, default = 123)
RNG seed for the baseline simulation (reproducibility).

seed_stress (integer, default = 456)
RNG seed for the stress simulation.

id_prefix_default (string, default = "sim")
Prefix for generated IDs in the baseline dataset (e.g., sim_0001).

id_prefix_stress (string, default = "stress")
Prefix for generated IDs in the stress dataset.

mode (string, one of c("threshold","meansd"))
Chooses the simulation engine:

"threshold": fit polychoric (or Pearson fallback) correlation; derive item thresholds from df_real; simulate latent multivariate normals; cut by thresholds to Likert. Best when you have moderate N and ordinal items.

"meansd": simpler Gaussian + rounding using item means/SDs and a (shrunken) Pearson R. Useful for very small N or when thresholds are unstable.

auto_small_switch (logical, default = TRUE)
If TRUE, automatically switch mode to "meansd" when sample size is small (see small_n_cutoff) to avoid unreliable threshold/ polychoric estimates.

small_n_cutoff (integer, default = 15)
Threshold for “small N” logic. If nrow(df_real) < small_n_cutoff and auto_small_switch = TRUE, use "meansd" internally.

threshold_strategy (string, one of c("empirical","equal"))
How to set category cut-points when mode = "threshold":

"empirical": use observed cumulative proportions per item (adds a small smoothing) → mirrors real response distributions.

"equal": use equally spaced thresholds on the latent normal → idealized balanced categories.




